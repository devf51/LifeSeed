(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[192],{6191:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8198:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]])},27345:(e,a,t)=>{"use strict";t.d(a,{X:()=>i});var s=t(25959),l=t(89863);let i=(0,s.v)()((0,l.Zr)((e,a)=>({habits:[],logs:[],addHabit:a=>e(e=>({habits:[...e.habits,{...a,id:crypto.randomUUID(),createdAt:new Date().toISOString()}]})),updateHabit:(a,t)=>e(e=>({habits:e.habits.map(e=>e.id===a?{...e,...t}:e)})),deleteHabit:a=>e(e=>({habits:e.habits.filter(e=>e.id!==a),logs:e.logs.filter(e=>e.habitId!==a)})),toggleLog:(a,t)=>e(e=>{let s=e.logs.find(e=>e.habitId===a&&e.date===t);return s?{logs:e.logs.filter(e=>e.id!==s.id)}:{logs:[...e.logs,{id:crypto.randomUUID(),habitId:a,date:t,status:"done"}]}}),getStreak:e=>{let t=a().logs.filter(a=>a.habitId===e&&"done"===a.status).map(e=>e.date).sort().reverse();if(0===t.length)return 0;let s=0,l=new Date,i=new Date(l.getFullYear(),l.getMonth(),l.getDate());for(let e=0;e<365;e++){let a=new Date(i);a.setDate(a.getDate()-e);let l=a.toISOString().split("T")[0];if(t.includes(l))s++;else if(e>0)break}return s},getWeeklyProgress:(e,t)=>{let s=new Date(t),l=[];for(let e=0;e<7;e++){let a=new Date(s);a.setDate(a.getDate()+e),l.push(a.toISOString().split("T")[0])}return a().logs.filter(a=>a.habitId===e&&"done"===a.status&&l.includes(a.date)).length}}),{name:"lifeseed-habits"}))},27937:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},38104:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]])},49912:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>g});var s=t(95155),l=t(12115),i=t(27345),r=t(38104),n=t(6191),d=t(90368),c=t(27937),o=t(8198);let h=(0,t(71847).A)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);var m=t(71360),b=t(65229);function g(){let[e,a]=(0,l.useState)(!1),[t,b]=(0,l.useState)(0),[g,x]=(0,l.useState)(!1),[p,j]=(0,l.useState)(null),y=(0,i.X)(e=>e.habits),v=(0,i.X)(e=>e.logs),N=(0,i.X)(e=>e.toggleLog),k=(0,i.X)(e=>e.deleteHabit),f=(0,i.X)(e=>e.getStreak);if((0,l.useEffect)(()=>{a(!0)},[]),!e)return null;let D=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=new Date,t=new Date(a);t.setDate(a.getDate()-a.getDay()+1+7*e);let s=["จ.","อ.","พ.","พฤ.","ศ.","ส.","อา."];return Array.from({length:7},(e,a)=>{let l=new Date(t);return l.setDate(t.getDate()+a),{date:l,dateStr:l.toISOString().split("T")[0],dayLabel:s[a]}})}(t),S=new Date().toISOString().split("T")[0],A=(e,a)=>v.some(t=>t.habitId===e&&t.date===a&&"done"===t.status);return(0,s.jsxs)("div",{className:"dashboard-page",children:[(0,s.jsxs)("header",{className:"page-header",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"page-title",children:[(0,s.jsx)(r.A,{size:32,className:"page-title-icon"}),"Habit Tracker"]}),(0,s.jsx)("p",{className:"page-subtitle",children:"ติดตามนิสัยประจำวัน — สร้างความสำเร็จทีละวัน"})]}),(0,s.jsxs)("button",{className:"btn btn-primary",onClick:()=>{j(null),x(!0)},children:[(0,s.jsx)(n.A,{size:18})," เพิ่มนิสัย"]})]}),(0,s.jsxs)("div",{className:"habit-week-nav",children:[(0,s.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:()=>b(e=>e-1),children:(0,s.jsx)(d.A,{size:16})}),(0,s.jsxs)("span",{className:"habit-week-label",children:[D[0].date.toLocaleDateString("th-TH",{day:"numeric",month:"short"})," — ",D[6].date.toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric"})]}),(0,s.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:()=>b(e=>e+1),children:(0,s.jsx)(c.A,{size:16})}),0!==t&&(0,s.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:()=>b(0),children:"วันนี้"})]}),0===y.length?(0,s.jsx)("div",{className:"glass-card",style:{padding:40,textAlign:"center"},children:(0,s.jsx)("p",{className:"empty-state",children:'ยังไม่มีนิสัย — กดปุ่ม "เพิ่มนิสัย" เพื่อเริ่มต้น'})}):(0,s.jsxs)("div",{className:"glass-card habit-grid-card",children:[(0,s.jsxs)("div",{className:"habit-grid-header",children:[(0,s.jsx)("div",{className:"habit-grid-name-col",children:"นิสัย"}),D.map(e=>(0,s.jsxs)("div",{className:"habit-grid-day-col ".concat(e.dateStr===S?"today":""),children:[(0,s.jsx)("span",{className:"day-name",children:e.dayLabel}),(0,s.jsx)("span",{className:"day-num",children:e.date.getDate()})]},e.dateStr)),(0,s.jsx)("div",{className:"habit-grid-stats-col",children:"สำเร็จ"}),(0,s.jsx)("div",{className:"habit-grid-actions-col"})]}),y.map(e=>{let a,t=f(e.id),l=(a=e.id,D.filter(e=>A(a,e.dateStr)).length),i=e.targetDaysPerWeek,r=i>0?Math.min(100,Math.round(l/i*100)):0;return(0,s.jsxs)("div",{className:"habit-grid-row",children:[(0,s.jsxs)("div",{className:"habit-grid-name-col",children:[(0,s.jsxs)("div",{className:"habit-name-cell",children:[(0,s.jsx)("span",{className:"habit-name",children:e.name}),(0,s.jsx)("span",{className:"habit-category",children:e.category})]}),t>0&&(0,s.jsxs)("span",{className:"streak-badge",children:[(0,s.jsx)(o.A,{size:11})," ",t]})]}),D.map(a=>{let t=A(e.id,a.dateStr);return(0,s.jsx)("div",{className:"habit-grid-day-col ".concat(a.dateStr===S?"today":""),children:(0,s.jsx)("button",{className:"habit-check-btn ".concat(t?"checked":""),onClick:()=>N(e.id,a.dateStr),"aria-label":"Toggle ".concat(e.name," on ").concat(a.dateStr),children:t&&"✓"})},a.dateStr)}),(0,s.jsx)("div",{className:"habit-grid-stats-col",children:(0,s.jsxs)("div",{className:"habit-progress-wrap",children:[(0,s.jsx)("div",{className:"habit-progress-bar",children:(0,s.jsx)("div",{className:"habit-progress-fill",style:{width:"".concat(r,"%"),background:r>=100?"var(--color-success)":r>=50?"var(--color-warning)":"var(--color-danger)"}})}),(0,s.jsxs)("span",{className:"habit-progress-text",children:[l,"/",i]})]})}),(0,s.jsxs)("div",{className:"habit-grid-actions-col",children:[(0,s.jsx)("button",{className:"icon-btn",onClick:()=>{j(e),x(!0)},"aria-label":"Edit",children:(0,s.jsx)(h,{size:14})}),(0,s.jsx)("button",{className:"icon-btn danger",onClick:()=>{confirm("ลบนิสัยนี้?")&&k(e.id)},"aria-label":"Delete",children:(0,s.jsx)(m.A,{size:14})})]})]},e.id)})]}),g&&(0,s.jsx)(u,{habit:p,onClose:()=>{x(!1),j(null)}})]})}function u(e){let{habit:a,onClose:t}=e,r=(0,i.X)(e=>e.addHabit),n=(0,i.X)(e=>e.updateHabit),[d,c]=(0,l.useState)((null==a?void 0:a.name)||""),[o,h]=(0,l.useState)((null==a?void 0:a.category)||""),[m,g]=(0,l.useState)((null==a?void 0:a.targetDaysPerWeek)||7);return(0,s.jsx)("div",{className:"modal-backdrop",onClick:t,children:(0,s.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h2",{children:a?"แก้ไขนิสัย":"เพิ่มนิสัยใหม่"}),(0,s.jsx)("button",{className:"modal-close",onClick:t,children:(0,s.jsx)(b.A,{size:16})})]}),(0,s.jsxs)("div",{className:"modal-form",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"ชื่อนิสัย"}),(0,s.jsx)("input",{className:"form-input",placeholder:"เช่น ออกกำลังกาย, เขียนโค้ด...",value:d,onChange:e=>c(e.target.value),autoFocus:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"หมวดหมู่"}),(0,s.jsx)("input",{className:"form-input",placeholder:"เช่น สุขภาพ, การเรียน...",value:o,onChange:e=>h(e.target.value)})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{className:"form-label",children:"เป้าหมาย (วัน/สัปดาห์)"}),(0,s.jsx)("input",{className:"form-input",type:"number",min:1,max:7,value:m,onChange:e=>g(Number(e.target.value))})]}),(0,s.jsxs)("div",{className:"modal-actions",children:[(0,s.jsx)("button",{className:"btn btn-secondary",onClick:t,children:"ยกเลิก"}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>{d.trim()&&(a?n(a.id,{name:d,category:o,targetDaysPerWeek:m}):r({name:d,category:o,targetDaysPerWeek:m}),t())},children:a?"บันทึก":"เพิ่มนิสัย"})]})]})]})})}},58812:(e,a,t)=>{Promise.resolve().then(t.bind(t,49912))},65229:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},71360:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},90368:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(71847).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])}},e=>{e.O(0,[315,441,255,358],()=>e(e.s=58812)),_N_E=e.O()}]);